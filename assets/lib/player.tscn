[gd_scene load_steps=24 format=3 uid="uid://c31s2badjsnua"]

[ext_resource type="Script" path="res://assets/scripts/player.gd" id="1_dqjj7"]
[ext_resource type="Script" path="res://assets/scripts/camshake.gd" id="2_c58xp"]
[ext_resource type="PackedScene" uid="uid://8a5etv1vqw6s" path="res://assets/lib/inventory.tscn" id="3_0tf20"]
[ext_resource type="Resource" uid="uid://scuon6ox1yn5" path="res://assets/items/pistol/pistol.tres" id="4_mfurj"]
[ext_resource type="Script" path="res://assets/scripts/additemdata.gd" id="5_o7rt1"]
[ext_resource type="Resource" uid="uid://drr3oo2k20f1r" path="res://assets/items/shotgun/shotgun.tres" id="6_qpr30"]
[ext_resource type="Resource" uid="uid://btpg0blmcrstf" path="res://assets/items/pistol_ammo/pistol_ammo.tres" id="7_muowc"]
[ext_resource type="Resource" uid="uid://nt0i2i0q4ogj" path="res://assets/items/shotgun_ammo/shotgun_ammo.tres" id="8_j8t1l"]
[ext_resource type="Resource" uid="uid://ds7oiu37ynqb3" path="res://assets/items/machete/machete.tres" id="9_4xquc"]
[ext_resource type="PackedScene" uid="uid://dgdqkkjpnrpbm" path="res://assets/lib/console.tscn" id="10_74xdo"]
[ext_resource type="Texture2D" uid="uid://cxs3r63cfoj6w" path="res://assets/textures/cursor.png" id="11_sfn26"]
[ext_resource type="Shader" path="res://assets/shaders/negativecursor.gdshader" id="11_ydyub"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_ui8lw"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_3gms1"]
height = 1.4

[sub_resource type="FastNoiseLite" id="FastNoiseLite_4tgis"]

[sub_resource type="Resource" id="Resource_v64n7"]
script = ExtResource("5_o7rt1")
item = ExtResource("4_mfurj")
quantity = 1

[sub_resource type="Resource" id="Resource_pdgrm"]
script = ExtResource("5_o7rt1")
item = ExtResource("6_qpr30")
quantity = 1

[sub_resource type="Resource" id="Resource_allcd"]
script = ExtResource("5_o7rt1")
item = ExtResource("7_muowc")
quantity = 30

[sub_resource type="Resource" id="Resource_17xec"]
script = ExtResource("5_o7rt1")
item = ExtResource("8_j8t1l")
quantity = 16

[sub_resource type="Resource" id="Resource_4ju0d"]
script = ExtResource("5_o7rt1")
item = ExtResource("9_4xquc")
quantity = 1

[sub_resource type="GDScript" id="GDScript_4b5tk"]
script/source = "extends Label
@onready var player = $\"../..\"
@onready var label = $\".\"
var scene

# Called when the node enters the scene tree for the first time.
func _ready():
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	#label.text = \"inf\"
	label.text = str(player.ismoving)
	#label.text = str(player.health)
	if player.health <= 0:
		get_tree().reload_current_scene()
	pass
"

[sub_resource type="GDScript" id="GDScript_yumf1"]
script/source = "extends Label
@onready var player = $\"../..\"
@onready var label = $\".\"
var scene

# Called when the node enters the scene tree for the first time.
func _ready():
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	#label.text = \"inf\"
	label.text = str(player.health)
	#label.text = str(player.health)
	if player.health <= 0:
		get_tree().reload_current_scene()
	pass
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_wo2cj"]
shader = ExtResource("11_ydyub")

[node name="player" type="CharacterBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
collision_layer = 2
script = ExtResource("1_dqjj7")

[node name="standcollider" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_ui8lw")

[node name="duckcollider" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_3gms1")
disabled = true

[node name="head" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.6, 0)

[node name="eyes" type="Node3D" parent="head"]

[node name="maincam" type="Camera3D" parent="head/eyes"]
fov = 80.0
script = ExtResource("2_c58xp")
trauma_reduction_rate = 2.0
max_x = 5.0
max_y = 5.0
max_z = 2.0
noise = SubResource("FastNoiseLite_4tgis")
noise_speed = 45.0

[node name="cameracolraycast" type="RayCast3D" parent="head/eyes/maincam"]
target_position = Vector3(0, 0, -1000)

[node name="interactray" type="RayCast3D" parent="head/eyes/maincam"]
target_position = Vector3(0, 0, -1000)
collision_mask = 4

[node name="equipped" type="Node3D" parent="head/eyes/maincam"]

[node name="groundcolraycast" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)
target_position = Vector3(0, 2, 0)

[node name="hud" type="Control" parent="."]
layout_mode = 3
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="inventorylayer" type="CanvasLayer" parent="hud"]

[node name="inventory" parent="hud/inventorylayer" instance=ExtResource("3_0tf20")]
startingItems = Array[ExtResource("5_o7rt1")]([SubResource("Resource_v64n7"), SubResource("Resource_pdgrm"), SubResource("Resource_allcd"), SubResource("Resource_17xec"), SubResource("Resource_4ju0d")])
metadata/_edit_use_anchors_ = true

[node name="consolelayer" type="CanvasLayer" parent="hud"]

[node name="console" parent="hud/consolelayer" instance=ExtResource("10_74xdo")]

[node name="Label" type="Label" parent="hud"]
layout_mode = 1
anchors_preset = 12
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 500.0
offset_top = 160.0
offset_right = 500.0
offset_bottom = 183.0
grow_horizontal = 2
grow_vertical = 0
text = "100"
script = SubResource("GDScript_4b5tk")

[node name="Label2" type="Label" parent="hud"]
layout_mode = 1
anchors_preset = 12
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 500.0
offset_top = 182.0
offset_right = 500.0
offset_bottom = 208.0
grow_horizontal = 2
grow_vertical = 0
text = "100"
script = SubResource("GDScript_yumf1")

[node name="vitalslayer" type="CanvasLayer" parent="hud"]

[node name="cursor" type="CanvasLayer" parent="hud"]

[node name="centercontainer" type="CenterContainer" parent="hud/cursor"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="TextureRect" type="TextureRect" parent="hud/cursor/centercontainer"]
material = SubResource("ShaderMaterial_wo2cj")
layout_mode = 2
texture = ExtResource("11_sfn26")
